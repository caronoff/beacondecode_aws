{% extends "layout.html" %}
{% block title %}Decoded Beacon {% endblock %}
{% block head %}
  {{ super() }}


<!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/signin.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/inputgroup.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/bootstrap-theme.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

<style media="screen" type="text/css">
     table {
     width:100%;
     }
     td {
       max-width: 0;
     }
     td.columnA {
     width:10%
     }
     td.columnB {
     width:15%;
       overflow:hidden;
       overflow-wrap:break-word;
       word-wrap: break-word;
       
     }
     td.columnC {
     width:25%
     }
     td.columnD {
     width:50%
     }


+ </style>

{% endblock %}

 {% block content %}
<div class="container">
  <h2>Decoded Beacon Message</h2>
  <p>The hex code decoded is: <strong>{{hexcode}}</strong></p>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Bit Ranges</th>
        <th>Binary value</th>
        <th>Name</th>
		<th>Description</th>
      </tr>
    </thead>
    <tbody>
	{% for item in decoded %}
      <tr>

        <td class="columnA"> {{ item[0] }} </td>
		<td class="columnB">{{ item[1] }} </td>
		<td class="columnC"> {{ item[2] }} </td>
		<td class="columnD"> {{ item[3] }} </td>

      </tr>
	{% endfor %}
    </tbody>
  </table>

  {% if locationcheck %}


  <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <h1>Latitude: {{ geocoord[0]}}   Longitude: {{ geocoord[1]}}</h1>
                    <p class="lead">Hex code {{hexcode}}.</p>
                    <p><strong>Map courtesy of Google Maps</strong> </p>
                </div>
            </div>

        </div>
        <div id="map"></div>


  {% endif %}


        <a href="/" class="btn btn-info btn-lg"  style="margin: 0 auto; display:block; text-align: center">
          <span class="glyphicon glyphicon-home"></span> Home
        </a>

</div>
{% endblock %}
{% block scripts %}
{{super()}}
<script type=text/javascript src="//cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
<!--
<script src="{{ url_for('static', filename='js/gmap.js') }}"></script>
-->
<script type=text/javascript>

      function initMap() {
        var location = new google.maps.LatLng({{ geocoord[0]}}, {{ geocoord[1]}});
        var mapCanvas = document.getElementById('map');
        var mapOptions = {
            center: location,
            zoom: 3,
            panControl: false,
            scrollwheel: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(mapCanvas, mapOptions);
        var markerImage = "{{ url_for('static', filename='images/marker.png') }}";

        var marker = new google.maps.Marker({
            position: location,
            map: map,
            icon: markerImage
        });

        var styles = [{"featureType": "landscape", "stylers": [{"saturation": -100}, {"lightness": 65}, {"visibility": "on"}]}, {"featureType": "poi", "stylers": [{"saturation": -100}, {"lightness": 51}, {"visibility": "simplified"}]}, {"featureType": "road.highway", "stylers": [{"saturation": -100}, {"visibility": "simplified"}]}, {"featureType": "road.arterial", "stylers": [{"saturation": -100}, {"lightness": 30}, {"visibility": "on"}]}, {"featureType": "road.local", "stylers": [{"saturation": -100}, {"lightness": 40}, {"visibility": "on"}]}, {"featureType": "transit", "stylers": [{"saturation": -100}, {"visibility": "simplified"}]}, {"featureType": "administrative.province", "stylers": [{"visibility": "off"}]}, {"featureType": "water", "elementType": "labels", "stylers": [{"visibility": "on"}, {"lightness": -25}, {"saturation": -100}]}, {"featureType": "water", "elementType": "geometry", "stylers": [{"hue": "#ffff00"}, {"lightness": -25}, {"saturation": -97}]}];

        map.set('styles', styles);

        var contentString = '<div class="info-window">' +
                '<h3>Alert!</h3>' +
                '<div class="info-content">' +
                '<p>beacon distress location {{ geocoord[0]}} , {{ geocoord[1]}}</p>' +
                '</div>' +
                '</div>';

        var infowindow = new google.maps.InfoWindow({
            content: contentString,
            maxWidth: 400
        });

        marker.addListener('click', function () {
            infowindow.open(map, marker);
        });


       
      }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBw4IpZdm6D7ob00fF9F9TjuZ2Eeif9QtE&callback=initMap" async defer></script>


{% endblock %}

