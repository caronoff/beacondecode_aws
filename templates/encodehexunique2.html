{% extends "layout.html" %}
{% block title %}Decoded Beacon{% endblock %}
{% block head %}
  {{ super() }}
<!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

<style media="screen" type="text/css">
     table {
     width:100%;
     }
     td {
       max-width: 0;
     }
     td.columnA {
     width:10%
     }
     td.columnB {
     width:15%;
       overflow:hidden;
       overflow-wrap:break-word;
       word-wrap: break-word;
     }
     td.columnC {
     width:35%
     }
     td.columnD {
     width:40%
     }
+ </style>

{% endblock %}

 {% block content %}
    <div id="decodetable">
  <h2>Encoding a SGB</h2>


</p>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Bit Ranges</th>
        <th>Binary value</th>
        <th>Name</th>
		<th>Description</th>
      </tr>
    </thead>
    <tbody>

      <tr>
        <td class="columnA"> 1 </td>
		<td class="columnB">1 </td>
		<td class="columnC">Fixed bit for SGB </td>
        <td class="columnD"></td>
    </tr>

<tr>
        <td class="columnA"> 2-11 </td>
		<td class="columnB"><span id="id_midbin">?</span> </td>
		<td class="columnC">
        Country code : <span id="id_mid">?</span>
        </td>
        <td class="columnD">


                    <div id="id_ctry"  class="form-group ui-widget">
                        <div>
                       <input id="tags" class="form-control" >
                        <span id="id_miderror" class="help-block"></span>
                        </div>
                    </div>


        </td>
    </tr>
<tr>
        <td class="columnA"> 13-14 </td>
		<td class="columnB">101 </td>
		<td class="columnC">Fixed Bits for SGB</td>
        <td class="columnD"> </td>
    </tr>

    <tr>
        <td class="columnA"> 15-30 </td>
		<td class="columnB"><span id="id_tabin">?</span> </td>
		<td class="columnC">C/S TAC# (max 65,535): <span id="id_tadec">?</span></td>
        <td class="columnD">
                    <input type="number" class="form-control" name="tano_input" value="0" id="id_tanoinput" min="0" max="65535" step="1" data-bind="value:id_tanoinput" >
                    <span id="id_tanoerror" class="help-block"></span>
        </td>
    </tr>

     <tr>
     <td class="columnA"> 31-44 </td>
		<td class="columnB"><span id="id_snbin">?</span> </td>
		<td class="columnC">Beacon S/N (max:16,383) :<span id="id_sndec">?</span> </td></td>
        <td class="columnD">
                    <input type="number" class="form-control" name="sn_input" value="0" id="id_sninput" min="0" max="16383" step="1" data-bind="value:id_sninput" >
                    <span id="id_snerror" class="help-block"></span>
        </td>
     </tr>


    </tbody>
  </table>
        <div class="btn-toolbar">
        <a href="/decode" class="btn btn-danger"  style="margin-top: auto ; display:block; text-align: center">
          <span class="glyphicon glyphicon-home" style="color:gray"></span> Return
        </a>

        </div>

</div>



{% endblock %}
{% block scripts %}
{{super()}}
<script type=text/javascript src="//cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
<script src="{{ url_for('static', filename='js/bootstrap-combobox.min.js') }}"></script>
<!--<script src="{{ url_for('static', filename='js/selectcountry.js') }}"></script>-->





<script type="text/javascript">
  $( function() {
    $( "#tags" ).autocomplete({
      source: function(request, response) {
            $.getJSON("{{url_for('autocomplete')}}",{
                q: request.term, // in flask, "q" will be the argument to look for using request.args
            }, function(data) {
                response(data.matching_results); // matching_results from jsonify
            });

		},
        minLength: 2,
        select: function(event, ui) {
            var country = ui.item.value
            console.log(country);
            Â 


  $.getJSON("{{url_for('getmid')}}", {
        a: country
      }, function(data) {
        $("#id_mid").text(data.mid);
        $("#id_midbin").text(data.midbin);
      });
  },
		change: function (event, ui) {
                if(!ui.item){
                    //http://api.jqueryui.com/autocomplete/#event-change -
                    // The item selected from the menu, if any. Otherwise the property is null
                    //so clear the item for force selection
                    $("#tags").val("");
                    $("#tags").focus();
                    alert('Valid selection required');
                }
            }


	  });
  });



  </script>



<script type="text/javascript">
$( "#id_tanoinput" ).change(function() {
 var ta = $("#id_tanoinput").val() ;
$.getJSON("{{url_for('getta')}}", {
        a: ta
      }, function(data) {
        $("#id_tabin").text(data.tacbin);
        $("#id_tadec").text(data.tadec);

      });
}  //change function
);
</script>

<script type="text/javascript">
$( "#id_sninput" ).change(function() {
 var sn = $("#id_sninput").val() ;
$.getJSON("{{url_for('getsn')}}", {
        a: sn
      }, function(data) {
        $("#id_snbin").text(data.snbin);
        $("#id_sndec").text(data.sndec);
      });
}  //change function
);
</script>


{% endblock %}
