{% extends "layout.html" %}
{% block title %}Index {{user}} {% endblock %}

{% block head %}
  {{ super() }}
<!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}

<div id="myform">
      <form class="form-signin" id="decodeHex" action="/decode"  method="POST">
        <h2 class="form-signin-heading">Beacon Message Decoder</h2>
        <label for="inputhexcode" class="sr-only">Enter hexadecimal code</label>
          <div class="input-group" data-validate="hex">
        <input type="text" name="hexcode" id="inputhexcode"  class="form-control" placeholder="Enter hexadecimal code" required autofocus >
          <span class="input-group-addon danger"><span class="glyphicon glyphicon-remove"></span></span>
          </div>
        <button class="btn btn-lg btn-primary btn-block" type="submit" title="Enter valid hexidecimal (A-E 0-9)" id="hexbutton" disabled>Decode Message</button>
        <div class="modal-body" style="strong">
          <span class="error-log"><br><div id="hexAlert" class="alert alert-danger collapse" role="alert" >
              <a id="linkClose" href="#" class="close" >&times;</a>
              <strong>Error! </strong><div id='echoResult'></div></div></span>
          </div>
      </form>
        <div id="intro">
        <p class="lead" >  <strong>Disclaimer: The user is warned that this beacon message decoder is provided by the Secretariat of the International Cospas-Sarsat Programme on an as-is basis without warranty about accuracy or suitability</strong><br>  </p>


<h3>This Decode Program Tool is NOT a Means of Registering your Beacon.</h3>
<p>This tool tells you what information has been programmed into your beacon. This beacon decode program tool is <span style="text-decoration: underline;">NOT</span>&nbsp;a means of registering your beacon and will&nbsp;<span style="text-decoration: underline;">NOT</span> register your beacon. You must ensure that you have properly registered your beacon at <a href="http://www.406registration.com">www.406registration.com</a> or otherwise with the <a href="en/beacons-pro/beacon-regulations-pro/beacon-registration-contact-information">proper authorities</a>&nbsp;using the hexadecimal identificaiton (Hex ID) of the beacon and up-to-date registration information (such as your name and emergency contact informtion). To register your beacon visit <a href="http://www.406registration.com">www.406registration.com</a>.</p>
<h3>Locating Your Beacon HEX ID</h3>
<p>The Hex ID is a 15 hexadecimal character string (valid range: numbers 0 through 9 and letters A through F), referred to as the beacon 15 Hex Identification, or 15 Hex ID. Your beacon’s 15 character Hex ID uniquely identifies your 406-MHz beacon and is encoded in the message your beacon transmits to search and rescue services if your beacon is activated. The Hex ID contains&nbsp;a country code that should match the flag of the aircraft or vessel (or residence country in the case of a PLB owner), and may include other identification information for the aircraft or vessel (depending on the protocol that was used when the beacon was electronically programmed). The aircraft or vessel identification included in the Hex ID may also&nbsp;contain the aircraft or vessel registration markings, the aircraft or vessel radio callsign, or other information.</p>
<p>You should find your beacon’s Hex ID on a label affixed to the beacon or in the beacon documentation provided by your beacon manufacturer. If you have difficulty locating your beacon Hex ID, contact your beacon manufacturer.</p>
<p>Please follow the steps below to properly use the Beacon Decode Program:</p>
<p>Enter the beacon hexadecimal information in the field provided, ensuring that there are no blank spaces before, after or between the hexadecimal characters.</p>
<p>Select the decode option relating to the number of characters entered.</p>
<p>Press "Process".</p>
<h3 style="font-family: Arial, Helvetica, sans-serif; line-height: 18px;"><strong>Note:</strong></h3>
<p>If the program issues a warning that a character is out of range, check the data entered to ensure that all digits are hexadecimal characters. For example ensure that the numerical digit "0" was not mistakenly entered as the letter "O"; if all appears correct, then&nbsp;verify that that blank spaces have not been entered either before the first character, after the last character, or in between the characters of the beacon message. Place the cursor before the first character and depress the back-space key until the characters are flush against the left edge of the input box, then place the cursor immediately after the last character and press the delete key (this will remove any blank spaces that were copied into the decode box before or after the beacon message).</p>
<h3 class="para" style="font-family: Arial, Helvetica, sans-serif; line-height: 18px; margin: 1em 0px; padding: 0px;"><strong>Disclaimer:</strong></h3>

<p>&nbsp;</p>




        </div>

</div>


{% endblock %}

{% block scripts %}
{{ super() }}

<script type=text/javascript>
function submitcode(){
    var $form = $(this).closest('form');
    $form.find(':input[type="submit"]').prop('disabled',false);
    $("#decodeHex").submit()
}
</script>

<script type=text/javascript>
    $('[title]').tooltip();
</script>


<script type=text/javascript>
 
$(document).ready(function(){
$('#inputhexcode').on('keyup change',function()
        {var $form = $(this).closest('form'),
        $group = $(this).closest('.input-group'),
		$addon = $group.find('.input-group-addon'),
		$icon = $addon.find('span');
        $.getJSON
            ($SCRIPT_ROOT+'/validatehex', {hexcode: $('input[name="hexcode"]').val(),lenval:[15,30,36,22,23,28,51,63]},function(data)
                {$("#statuscheck").text(data.echostatus);
                if(data.echostatus=='valid'){
                        $form.find(':input[type="submit"]').prop('disabled', false);
                        $addon.removeClass('danger');
				        $addon.addClass('success');
				        $icon.attr('class', 'glyphicon glyphicon-ok');
                        $("#echoResult").text("");
                        $('#hexAlert').hide('fade');
                        }

                else{
                        $form.find(':input[type="submit"]').prop('disabled', true);
                        $("#echoResult").text(data.message);
                        $addon.removeClass('success');
				        $addon.addClass('danger');
				        $icon.attr('class', 'glyphicon glyphicon-remove');
				        $('#hexAlert').show('fade');
				        setTimeout(function(){
                            $('#hexAlert').hide('fade');
                            },5000);


                    }
                }
            );
             return false;
        }
    ); //end bind

        $('#linkClose').click(function(){
            $('#hexAlert').hide('fade');
         });
         $('#hexbutton').mousedown(function(){
        var mb=$("#statuscheck").text();
        var $form = $(this).closest('form');
        if(mb=='valid'){
        $form.find(':input[type="submit"]').prop('disabled', false);
        }});


}
);  </script>


{% endblock %}

